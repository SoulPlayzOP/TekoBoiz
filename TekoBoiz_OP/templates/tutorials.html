{% extends "base.html" %}

{% block title %}Tutorials - TekoBoiz{% endblock %}

{% block content %}
<section class="tutorials-header">
    <div class="container">
        <h1>All Tutorials</h1>
        <p>Complete collection of programming tutorials and resources</p>
    </div>
</section>

<section class="tutorials-content">
    <div class="container">
        <div class="tutorials-grid">
            {% if tutorials %}
                {% for tutorial in tutorials %}
                <div class="tutorial-card">
                    {% if session.is_admin %}
                        <form method="POST" action="{{ url_for('delete_tutorial', tutorial_id=tutorial.id) }}" class="delete-form" onsubmit="return confirm('Delete this tutorial?')">
                            <button type="submit" class="delete-btn" title="Delete Tutorial">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                </svg>
                            </button>
                        </form>
                    {% endif %}
                    <div class="video-embed">
                        {% if tutorial.video_embed %}
                            {{ tutorial.video_embed|safe }}
                        {% else %}
                            <div class="no-video">No Video</div>
                        {% endif %}
                    </div>
                    <div class="tutorial-info">
                        <div class="tutorial-header">
                            <h3 class="tutorial-title">{{ tutorial.title }}</h3>
                            <div class="tutorial-meta">
                                <span class="tutorial-date">Tutorial</span>
                            </div>
                        </div>
                        <div class="tutorial-description">
                            {{ tutorial.description|replace('\n', '<br>')|safe }}
                        </div>
                        {% if tutorial.code_snippets %}
                            {% for snippet in tutorial.code_snippets %}
                                <div class="code-snippet">
                                    <h4>Code Snippet {{ loop.index }}:</h4>
                                    <div class="code-container">
                                        <pre class="code-preview"><code>{{ snippet[:200] }}{% if snippet|length > 200 %}...{% endif %}</code></pre>
                                        {% if snippet|length > 200 %}
                                            <button class="expand-btn" onclick="toggleCode(this)">Show More</button>
                                            <pre class="code-full" style="display: none;"><code>{{ snippet }}</code></pre>
                                        {% endif %}
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}
                        <div class="tutorial-resources">
                            {% if tutorial.code_urls %}
                                {% for url in tutorial.code_urls %}
                                    <a href="{{ url }}" target="_blank" class="resource-link code">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                                        </svg>
                                        Code {{ loop.index }}
                                    </a>
                                {% endfor %}
                            {% endif %}
                            {% if tutorial.files_urls %}
                                {% for url in tutorial.files_urls %}
                                    <a href="{{ url }}" target="_blank" class="resource-link files">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                        </svg>
                                        Files {{ loop.index }}
                                    </a>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="empty-state">
                    <div class="sad-face">ðŸ˜¢</div>
                    <h3>No tutorials yet</h3>
                    <p>Check back soon for amazing programming tutorials!</p>
                </div>
            {% endif %}
        </div>
    </div>
</section>


{% endblock %}